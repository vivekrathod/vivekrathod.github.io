---
title: Conditionally referencing DEBUG and RELEASE builds in Visual Studio projects
date: 2013-03-13 08:30:00 Z
tags:
- Programming
- ".NET"
- tips
- Technology
layout: post
author: Vivek Rathod
modified_time: '2013-03-13T04:58:09.523-04:00'
blogger_id: tag:blogger.com,1999:blog-3203466822740858620.post-8600238658083281772
blogger_orig_url: https://blog.vivekrathod.com/2013/03/conditionally-referencing-debug-and.html
---

<p>This is a little neat trick I learned from someone on stackexchange.com.&nbsp; When adding a reference to an assembly in Visual Studio projects one can choose only one type of the assembly build DEBUG or RELEASE. There is no way in the IDE to reference DEBUG assembly when making DEBUG builds of your projects and reference RELEASE assembly when making RELEASE builds.&nbsp; But this can be achieved by directly editing the project file (extension .csproj for a C# project, for example) in any text editor. A typical hint path entry for the referenced assembly looks like this </p><pre class="csharpcode">    &lt;Reference Include=<span class="str">"ReferenceAssembly, Version=1.0.0.0, Culture=neutral, processorArchitecture=MSIL"</span>&gt;<br />      &lt;SpecificVersion&gt;False&lt;/SpecificVersion&gt;<br />      &lt;HintPath&gt;..\..\..\externals\<strong>Release</strong>\ReferenceAssembly.dll&lt;/HintPath&gt;<br />    &lt;/Reference&gt;</pre><br /><style type="text/css">.csharpcode, .csharpcode pre<br />{<br />	font-size: small;<br />	color: black;<br />	font-family: consolas, "Courier New", courier, monospace;<br />	background-color: #ffffff;<br />	/*white-space: pre;*/<br />}<br />.csharpcode pre { margin: 0em; }<br />.csharpcode .rem { color: #008000; }<br />.csharpcode .kwrd { color: #0000ff; }<br />.csharpcode .str { color: #006080; }<br />.csharpcode .op { color: #0000c0; }<br />.csharpcode .preproc { color: #cc6633; }<br />.csharpcode .asp { background-color: #ffff00; }<br />.csharpcode .html { color: #800000; }<br />.csharpcode .attr { color: #ff0000; }<br />.csharpcode .alt <br />{<br />	background-color: #f4f4f4;<br />	width: 100%;<br />	margin: 0em;<br />}<br />.csharpcode .lnum { color: #606060; }<br /></style><br /><br /><p>The project file is in MSBUILD format and that allows us to use built-in project property $(Configuration) to conditionally point to different locations of the same assembly depending on the current build configuration of DEBUG or RELEASE</p><pre class="csharpcode">    &lt;Reference Include=<span class="str">"ReferenceAssembly, Version=1.0.0.0, Culture=neutral, processorArchitecture=MSIL"</span>&gt;<br />      &lt;SpecificVersion&gt;False&lt;/SpecificVersion&gt;<br />      &lt;HintPath&gt;..\..\..\externals\<strong>$(Configuration)</strong>\ReferenceAssembly.dll&lt;/HintPath&gt;<br />    &lt;/Reference&gt;</pre><br /><style type="text/css">.csharpcode, .csharpcode pre<br />{<br />	font-size: small;<br />	color: black;<br />	font-family: consolas, "Courier New", courier, monospace;<br />	background-color: #ffffff;<br />	/*white-space: pre;*/<br />}<br />.csharpcode pre { margin: 0em; }<br />.csharpcode .rem { color: #008000; }<br />.csharpcode .kwrd { color: #0000ff; }<br />.csharpcode .str { color: #006080; }<br />.csharpcode .op { color: #0000c0; }<br />.csharpcode .preproc { color: #cc6633; }<br />.csharpcode .asp { background-color: #ffff00; }<br />.csharpcode .html { color: #800000; }<br />.csharpcode .attr { color: #ff0000; }<br />.csharpcode .alt <br />{<br />	background-color: #f4f4f4;<br />	width: 100%;<br />	margin: 0em;<br />}<br />.csharpcode .lnum { color: #606060; }<br /></style><br /><br /><p>In this case, when making a DEBUG build of project the ReferenceAssembly.dll from ..\..\..\externals\<strong>Debug</strong>\ folder will be referenced. And when making RELEASE build the assembly will be picked up from ..\..\..\externals\<strong>Release</strong>\ folder.</p><br /><p><br /><style type="text/css">.csharpcode, .csharpcode pre<br />{<br />	font-size: small;<br />	color: black;<br />	font-family: consolas, "Courier New", courier, monospace;<br />	background-color: #ffffff;<br />	/*white-space: pre;*/<br />}<br />.csharpcode pre { margin: 0em; }<br />.csharpcode .rem { color: #008000; }<br />.csharpcode .kwrd { color: #0000ff; }<br />.csharpcode .str { color: #006080; }<br />.csharpcode .op { color: #0000c0; }<br />.csharpcode .preproc { color: #cc6633; }<br />.csharpcode .asp { background-color: #ffff00; }<br />.csharpcode .html { color: #800000; }<br />.csharpcode .attr { color: #ff0000; }<br />.csharpcode .alt <br />{<br />	background-color: #f4f4f4;<br />	width: 100%;<br />	margin: 0em;<br />}<br />.csharpcode .lnum { color: #606060; }<br /></style><br />In fact, we can also choose to reference assemblies in different paths like this</p><pre class="csharpcode">&lt;Reference Include=<span class="str">"ReferenceAssembly, Version=1.0.0.0, Culture=neutral, processorArchitecture=MSIL"</span>&gt;   <br />  &lt;HintPath Condition=<span class="str">"'$(Configuration)' == 'Debug'"</span>&gt;..\..\..\path1\ReferenceAssembly.dll&lt;/HintPath&gt;<br />  &lt;HintPath Condition=<span class="str">"'$(Configuration)' == 'Release'"</span>&gt;..\..\..\path2\ReferenceAssembly.dll&lt;/HintPath&gt;<br />&lt;/Reference&gt;</pre><br /><style type="text/css">.csharpcode, .csharpcode pre<br />{<br />	font-size: small;<br />	color: black;<br />	font-family: consolas, "Courier New", courier, monospace;<br />	background-color: #ffffff;<br />	/*white-space: pre;*/<br />}<br />.csharpcode pre { margin: 0em; }<br />.csharpcode .rem { color: #008000; }<br />.csharpcode .kwrd { color: #0000ff; }<br />.csharpcode .str { color: #006080; }<br />.csharpcode .op { color: #0000c0; }<br />.csharpcode .preproc { color: #cc6633; }<br />.csharpcode .asp { background-color: #ffff00; }<br />.csharpcode .html { color: #800000; }<br />.csharpcode .attr { color: #ff0000; }<br />.csharpcode .alt <br />{<br />	background-color: #f4f4f4;<br />	width: 100%;<br />	margin: 0em;<br />}<br />.csharpcode .lnum { color: #606060; }<br /></style><br /><br /><style type="text/css">.csharpcode, .csharpcode pre<br />{<br />	font-size: small;<br />	color: black;<br />	font-family: consolas, "Courier New", courier, monospace;<br />	background-color: #ffffff;<br />	/*white-space: pre;*/<br />}<br />.csharpcode pre { margin: 0em; }<br />.csharpcode .rem { color: #008000; }<br />.csharpcode .kwrd { color: #0000ff; }<br />.csharpcode .str { color: #006080; }<br />.csharpcode .op { color: #0000c0; }<br />.csharpcode .preproc { color: #cc6633; }<br />.csharpcode .asp { background-color: #ffff00; }<br />.csharpcode .html { color: #800000; }<br />.csharpcode .attr { color: #ff0000; }<br />.csharpcode .alt <br />{<br />	background-color: #f4f4f4;<br />	width: 100%;<br />	margin: 0em;<br />}<br />.csharpcode .lnum { color: #606060; }<br /></style>  